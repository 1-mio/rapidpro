-extends "smartmin/list.html"
-load smartmin sms temba compress
-load i18n humanize

-block table
  %table.list-table.table(cellspacing="0")
    %tbody
      -for obj in object_list
        %tr
          %td(width="16px")
            -if obj.status == "P" or obj.status == "S"
              %span.spin.icon-loop(title="{{ obj.get_status_display }}")
            -elif obj.status == "C"
              %span.icon-checkmark(title="{{ obj.get_status_display }}")
            -elif obj.status == "F"
              %span.icon-warning(title="{{ obj.get_status_display }}")
          %td
            %a(href="{% url 'flows.flow_editor' obj.flow.uuid %}")
              {{ obj.flow.name }}

<<<<<<< HEAD
<<<<<<< HEAD
            -blocktrans trimmed with user=obj.created_by
              was started by {{ user }} for
=======
=======
>>>>>>> 9bcc78539e15ec1c007be4aa76ac7279707c9fc9
            -if obj.start_type == "M"
              -blocktrans trimmed with user=obj.created_by
                was started by {{ user }} for
            -else
              -trans "was started by an API call for"
<<<<<<< HEAD
>>>>>>> 92ec4d94cd4ad55d49ff7a62d0eecfdf4db46b82
=======
>>>>>>> 9bcc78539e15ec1c007be4aa76ac7279707c9fc9

            -if obj.restart_participants and obj.include_active
              -trans "all contacts"
            -elif obj.restart_participants and not obj.include_active
              -trans "contacts not in other flows"
            -elif not obj.restart_participants and not obj.include_active
              -trans "contacts not in other flows who haven't already been through this flow"
            -else
              -trans "contacts who haven't already been through this flow"

            .(style="padding-top: 10px")
              -include "includes/recipients.haml" with groups=obj.groups.all contacts=obj.contacts.all query=obj.query

          %td(style="text-align: right")
            {% short_datetime obj.created_on %}
      -empty
        %tr.empty_list
          %td
          %td
          %td
