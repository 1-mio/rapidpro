-extends "smartmin/read.html"
-load smartmin i18n

-block pjax
  %temba-modax(id="delete-ticketer-{{ object.uuid }}" header='{% trans "Delete Ticket Service" %}')

  -blocktrans trimmed with type_name=object.get_type.name name=object.name
    {{ type_name }} ticketing service over <b>{{ name }}</b>. Contacts who have open tickets with this service will have their
    messages forwarded to the service, and replies made using the service will be sent back to the contact.

  .buttons.mt-5
    -if org_perms.request_logs.httplog_ticketer
      .button-light.mr-3(onclick='goto(event)' href='{% url "request_logs.httplog_ticketer" object.uuid %}')
        -trans "HTTP Log"
    -if org_perms.tickets.ticketer_delete
      .button-light(onclick='showDeleteTicketerModal("{{ object.uuid }}")')
        -trans "Remove"


-block summary
  -blocktrans trimmed with type_name=object.get_type.name name=object.name
    {{ type_name }} ticketing service over <b>{{ name }}</b>.


-block extra-script
  :javascript
    function showDeleteTicketerModal(uuid) {
      var modax = document.querySelector(`#delete-ticketer-${uuid}`);
      modax.endpoint = `/ticketer/delete/${uuid}/`;
      modax.open = true;
    }